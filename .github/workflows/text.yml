name: Text

on:
 push:
  paths:
  - '.github/workflows/text.yml'
  - 'Fallout2/Fallout1in2/**/*.[Mm][Ss][Gg]'
 pull_request:
  paths:
  - '.github/workflows/text.yml'
  - 'Fallout2/Fallout1in2/**/*.[Mm][Ss][Gg]'

defaults:
 run:
  shell: bash

jobs:
 All:
  if:      github.ref == 'refs/heads/master'
  runs-on: windows-latest
  steps:

  - name: Clone
    uses: actions/checkout@v2

  - name: ScanMsg
    uses: wipe2238/ScanMsg@master
    with:
     workdir: Fallout2/Fallout1in2/mods/

 English:
  if:      github.ref == 'refs/heads/fo1_french' || github.ref == 'refs/heads/fo1_german'
  runs-on: windows-latest
  steps:

  - name: Clone
    uses: actions/checkout@v2

  - name: Base
    uses: wipe2238/ScanMsg@master
    with:
     path:    fo1_base/text/english/
     workdir: Fallout2/Fallout1in2/mods/

  - name: Robodog
    uses: wipe2238/ScanMsg@master
    with:
     path:    fo1_robodog/text/english/
     workdir: Fallout2/Fallout1in2/mods/

 French:
  if:      github.ref == 'refs/heads/fo1_french'
  needs:   English
  runs-on: windows-latest

  steps:

  - name: Clone
    uses: actions/checkout@v2

  - name: Base
    uses: wipe2238/ScanMsg@master
    with:
     path:         fo1_base/text/english/
     translations: fo1_french/text/french/
     workdir:      Fallout2/Fallout1in2/mods/

  - name: Robodog
    uses: wipe2238/ScanMsg@master
    with:
     path:         fo1_robodog/text/english/
     translations: fo1_robodog/text/french//
     workdir:      Fallout2/Fallout1in2/mods/

 German:
  if:      github.ref == 'refs/heads/fo1_german'
  needs:   English
  runs-on: windows-latest

  steps:

  - name: Clone
    uses: actions/checkout@v2

  - name: Base
    uses: wipe2238/ScanMsg@master
    with:
     path:         fo1_base/text/english/
     translations: fo1_german/text/german/
     workdir:      Fallout2/Fallout1in2/mods/

  - name: Robodog
    uses: wipe2238/ScanMsg@master
    with:
     path:         fo1_robodog/text/english/
     translations: fo1_robodog/text/german/
     workdir:      Fallout2/Fallout1in2/mods/
