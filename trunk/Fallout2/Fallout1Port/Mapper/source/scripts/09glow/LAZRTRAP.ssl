//
// ---TRAP SCRIPT---  Sduibek
//
#include "..\headers\define.h"

procedure start;
procedure spatial_p_proc;

variable Damage;

procedure start begin
end

procedure spatial_p_proc begin
	if global_var(QUEST_GLOW_2_START_POWER) and global_var(QUEST_GLOW_1_TRAPS_OFF) then begin
		Damage := random(1, 6);
		float_msg(dude_obj, message_str(SCRIPT_LAZRTRAP, 100), 0);
		display_msg(message_str(SCRIPT_LAZRTRAP, 104));
		critter_dmg(dude_obj, Damage, 1 bwor 256);
		if party_member_obj(obj_pid(source_obj)) then begin
			critter_dmg(source_obj, Damage, 1 bwor 256);
		end
	end
end
