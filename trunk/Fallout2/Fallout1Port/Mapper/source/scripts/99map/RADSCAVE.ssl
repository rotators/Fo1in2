#include "..\headers\define.h"

procedure start;
procedure map_enter_p_proc;
procedure map_update_p_proc;
procedure map_exit_p_proc;

procedure Darkness;

variable party_elevation;
variable dude_start_hex;
variable HEREBEFORE;
variable time;

procedure start begin
end

procedure map_enter_p_proc begin
	call Darkness;
	if (map_first_run) then begin
		display_msg(message_str(SCRIPT_SSRADSCO, 200));//Cave mouth beckons
	end
	override_map_start(156, 106, 0, 1);
end

procedure map_update_p_proc begin
	call Darkness;
end

procedure map_exit_p_proc begin
	game_time_advance(game_ticks(60 * 30));
end

procedure Darkness
begin
	if not(global_var(FIXT_BUGFIXES_ONLY)) then begin
		set_light_level(global_var(CAVES_LIGHT_LEVEL));
	end
	else begin
		set_light_level(40);
	end
end
