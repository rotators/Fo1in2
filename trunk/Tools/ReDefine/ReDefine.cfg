#
# ReDefine configuration
#

# [ReDefine]
#
# HeadersDir = <path>
# ScriptsDir = <path>
#
[ReDefine]
HeadersDir = ../../Fallout2/Fallout1Port/Mapper/source/scripts/headers
ScriptsDir = ../../Fallout2/Fallout1Port/Mapper/source/scripts

# [Defines]
# Assigns names to defines types
#
# <type> = <path> <prefix> (group)
#
#   type     name for given value type
#   path     path to file containing interesting defines (relative to [ReDefine]->ScriptsDir)
#   prefix   required prefix for interesting defines
#   group    optional; allows to group multiple types under single name
#
[Defines]
AI = aipacket.h AI
ANIM = animcomd.h ANIM
AREA = maps.h AREA
CRITTER_PID = critpid.h PID - ANY_PID
DMG = define.h DMG
FID = artfid.h FID
GVAR = global.h GVAR
ITEM_PID = itempid.h PID - ANY_PID
MAP = maps.h MAP
METARULE = define.h METARULE
OBJECT = define.h OBJECT
PCSTAT = define.h PCSTAT
PERK = define.h PERK
REACTION = define.h - REACTION
SCENERY_PID = scenepid.h PID - ANY_PID
SID = scripts.h SCRIPT
SKILL = define.h SKILL
STAT = define.h STAT
TEAM = teams.h TEAM
# needs to be in two separate files, as they share same prefix
TRAIT_TYPE = fo1.h TRAIT
TRAIT = define.h TRAIT

# [Defines:TYPE]
# Creates program-specific defines
#
# <value> = <name>
#

# Do not complain or change SID 0/-1
[Defines:SID]
0 = 0
-1 = -1

# [VariableAssign]
# Replace all occurences of variable_name := NUMBER
#
# <name> = <type>
#
#   name   variable name
#   type   name for given value type
#
[VariableAssign]
Critter_script = SID
Critter_type = CRITTER_PID

# [VariableEquals]
# Replace all occurences of variable_name == NUMBER
#
# <name> = <type>
#
#   name   variable name
#   type   name for given value type
#
[VariableEquals]
Critter_script = SID
Critter_type = CRITTER_PID
cur_map_index = MAP

# [VariableNotEquals]
# Replace all occurences of variable_name != NUMBER
#
# <name> = <type>
#
#   name   variable name
#   type   name for given value type
#
[VariableNotEquals]
Critter_script = SID
Critter_type = CRITTER_PID
cur_map_index = MAP
self_ai = AI
self_team = TEAM

# [VariableLower]
# Replace all occurences of variable_name < NUMBER
#
# <name> = <type>
#
#   name   variable name
#   type   name for given value type
#
[VariableLower]
cur_map_index = MAP

# [VariableGreater]
# Replace all occurences of variable_name > NUMBER
#
# <name> = <type>
#
#   name   variable name
#   type   name for given value type
#
[VariableGreater]
cur_map_index = MAP

# [VariableGuess]
#
# VariableGuess = <types list>
#
[VariableGuess]
VariableGuess = SCENERY_PID

# [Function]
# Replaces all occurences of function_name(..., NUMBER, ...)
#
# <name> = <types list>
#
#   name         function name
#   types list   aguments types; if given argument shouldn't be checked/changed, use ? or ??? virtual types
#
[Function]
art_change_fid_num = ? FID
create_object = ANY_PID ? ?
create_object_sid  = ANY_PID ? ? SID
critter_add_trait = ? TRAIT_TYPE ?dynamic? ?dynamic?
critter_skill_level = ? SKILL
critter_dmg = ? ? DMG
critter_mod_skill = ? SKILL ?
dude_item = ITEM_PID
dude_item_count = ITEM_PID
dude_perk = PERK
dude_trait = TRAIT
get_critter_stat = ? STAT
get_pc_stat = PCSTAT
giq_option = ? SID ? ? REACTION
global_var = GVAR
has_skill = ? SKILL
has_trait = TRAIT_TYPE ? ?dynamic?
kill_critter = ? ANIM
kill_critter_type = CRITTER_PID ?
load_map = MAP ?
message_str = SID ?
metarule = METARULE ?
obj_carrying_pid_obj = ? ITEM_PID
obj_is_carrying_obj_pid = ? ITEM_PID
roll_vs_skill = ? SKILL ?
self_item = ITEM_PID
self_item_count = ITEM_PID
self_perk = PERK
self_trait = TRAIT
set_critter_stat = ? STAT ?
set_ai = ? AI
set_global_var = GVAR ?
set_self_ai = AI
set_self_team = TEAM
set_team = ? TEAM
using_skill = ? SKILL

# [FunctionEquals]
# Replaces all occurences of function_name(...) == NUMBER
#
# <name> = <type>
#
#   name         function name
#   type   name for given value type
#
[FunctionEquals]
obj_pid = ANY_PID

# [FunctionNotEquals]
# Replaces all occurences of function_name(...) != NUMBER
#
# <name> = <type>
#
#   name         function name
#   type   name for given value type
#
[FunctionNotEquals]
obj_pid = ANY_PID

# [Raw]
# Replaces all occurences of raw text
#
# <from> = <to>
#
#   from   text to search
#   to     replacement
#
[Raw]
SKILL_CONVERSANT = SKILL_SPEECH
STAT_max_hit_points = STAT_max_hp

[Script:Setup:CritterAddTrait]
#
# edited very early due to arguments depending on each other
# standard replacements won't be able to process function properly without this setup
#
AI = RunBefore:3 IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_OBJECT IfArgumentIs:2,OBJECT_AI_PACKET DoArgumentSetType:3,AI
Object = RunBefore:1 IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_OBJECT DoArgumentSetType:2,OBJECT
Perk = RunBefore:0 IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_PERK DoArgumentSetType:2,PERK
Team = RunBefore:4 IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_OBJECT IfArgumentIs:2,OBJECT_TEAM_NUM DoArgumentSetType:3,TEAM
Trait = RunBefore:2 IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_TRAIT DoArgumentSetType:2,TRAIT

[Script:Setup:HasTrait]
#
# edited verly early due to arguments depending on each other
# standard replacements won't be able to process function properly without this setup
#
Object = RunBefore:1 IfFunction:has_trait IfArgumentIs:0,TRAIT_OBJECT DoArgumentSetType:2,OBJECT
Perk = RunBefore:0 IfFunction:has_trait IfArgumentIs:0,TRAIT_PERK DoArgumentSetType:2,PERK
Trait = RunBefore:2 IfFunction:has_trait IfArgumentIs:0,TRAIT_TRAIT DoArgumentSetType:2,TRAIT

[Script:Humanize:Metarule]
#
# edited early, as other parts of config might want to process results
#
SignalEndGame = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_SIGNAL_END_GAME DoVariable:signal_end_game
MapFirstRun = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_TEST_FIRSTRUN DoVariable:map_first_run
Elevator = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_ELEVATOR DoNameSet:elevator DoArgumentsErase:0
PartyMemberCount = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_PARTY_COUNT DoNameSet:party_member_count DoArgumentsErase:0
TownKnown = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_AREA_KNOWN DoNameSet:town_known DoArgumentsErase:0
DrugInfluence = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_WHO_ON_DRUGS DoNameSet:drug_influence DoArgumentsErase:0
MapIsKnown = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_MAP_KNOWN DoNameSet:map_is_known DoArgumentsErase:0
IsLoadingGame = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_IS_LOADGAME DoVariable:is_loading_game
CarCurrentTown = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_CAR_CURRENT_TOWN DoVariable:car_current_town
CarGiveToParty = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_GIVE_CAR_TO_PARTY DoVariable:car_give_to_party
CarGiveGas = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_GIVE_CAR_GAS DoNameSet:car_give_gas DoArgumentsErase:0
IsSkillTagged = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_SKILL_CHECK_TAG DoNameSet:is_skill_tagged DoArgumentsErase:0
ObjDropEverything = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_DROP_ALL_INVEN DoNameSet:obj_drop_everything DoArgumentsErase:0
InvenUnwield = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_INVEN_UNWIELD_WHO DoNameSet:inven_unwield DoArgumentsErase:0
WorldmapXpos = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_GET_WORLDMAP_XPOS DoVariable:worldmap_xpos
WorldmapYpos = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_GET_WORLDMAP_YPOS DoVariable:worldmap_ypos
CurTown = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_CURRENT_TOWN DoVariable:cur_town
LanguageFilterIsOn = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_LANGUAGE_FILTER DoVariable:language_filter_is_on
ViolenceFilterSetting = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_VIOLENCE_FILTER DoVariable:violence_filter_setting
WeaponDmgType = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_W_DAMAGE_TYPE DoNameSet:weapon_dmg_type DoArgumentsErase:0
CritterCanBarter = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_CRITTER_BARTERS DoNameSet:critter_can_barter DoArgumentsErase:0
CritterKillType = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_CRITTER_KILL_TYPE DoNameSet:critter_kill_type DoArgumentsErase:0
SetCarCarryAmount = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_SET_CAR_CARRY_AMOUNT DoNameSet:set_car_carry_amount DoArgumentsErase:0
CarCarryAmount = RunAfter:10 IfFunction:metarule IfArgumentIs:0,METARULE_GET_CAR_CARRY_AMOUNT DoVariable:car_carry_amount DoArgumentsErase:0

[Script:Minimize]
#
# one-liners
#
#define attack(WHO) attack_complex(WHO,0,1,0,0,30000,0,0)
AttackComplex = RunAfter IfFunction:attack_complex IfArgumentValue:1,0 IfArgumentValue:2,1 IfArgumentValue:3,0 IfArgumentValue:4,0 IfArgumentValue:5,30000 IfArgumentValue:6,0 IfArgumentValue:7,0 DoNameSet:attack DoArgumentsResize:1
CreateObjectSid = RunAfter:50 IfFunction:create_object_sid IfArgumentValue:3,-1 DoNameSet:create_object DoArgumentsResize:3

[Script:Minimize:CritterAddTrait]
#
# set_TRAITYPE()/set_self_TRAITYPE() macros
#
SetAI = RunAfter IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_OBJECT IfArgumentIs:2,OBJECT_AI_PACKET DoNameSet:set_ai DoArgumentsErase:2 DoArgumentsErase:1
SetTeam = RunAfter IfFunction:critter_add_trait IfArgumentIs:1,TRAIT_OBJECT IfArgumentIs:2,OBJECT_TEAM_NUM DoNameSet:set_team DoArgumentsErase:2 DoArgumentsErase:1
SetSelfAI = RunAfter IfFunction:set_ai IfArgumentValue:0,self_obj DoNameSet:set_self_ai DoArgumentsErase:0
SetSelfTeam = RunAfter IfFunction:set_team IfArgumentValue:0,self_obj DoNameSet:set_self_team DoArgumentsErase:0

[Script:Minimize:Elevation]
DudeElevation = RunAfter IfFunction:elevation IfArgumentValue:0,dude_obj DoVariable:dude_elevation
SelfElevation = RunAfter IfFunction:elevation IfArgumentValue:0,self_obj DoVariable:self_elevation

[Script:Minimize:GetCritterStat]
#
# dude_GENDER macros
#
DudeIsMale = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_gender IfOperatorName:Equals IfOperatorValue:0 DoVariable:dude_is_male DoOperatorClear
DudeIsFemale:EQ = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_gender IfOperatorName:Equals IfOperatorValue:1 DoVariable:dude_is_female DoOperatorClear
DudeIsFemale:GT = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_gender IfOperatorName:Greater IfOperatorValue:0 DoVariable:dude_is_female DoOperatorClear
DudeIsFemale:NE = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_gender IfOperatorName:NotEquals IfOperatorValue:0 DoVariable:dude_is_female DoOperatorClear
#
# self_GENDER macros
#
SelfIsMale = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_gender IfOperatorName:Equals IfOperatorValue:0 DoVariable:self_is_male DoOperatorClear
SelfIsFemale = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_gender IfOperatorName:Equals IfOperatorValue:1 DoVariable:self_is_female DoOperatorClear

# BROKEN, DO NOT USE
#[Script:Minimize:GiqOption]
#G  = RunAfter IfFunction:giq_option IfArgumentIs:4,GOOD_REACTION IfFileDefined:NAME DoNameSet:GOption DoArgumentsResize:4 DoArgumentsMoveBack:0 DoArgumentsErase:0
#N  = RunAfter IfFunction:giq_option IfArgumentIs:4,NEUTRAL_REACTION IfFileDefined:NAME DoNameSet:NOption DoArgumentsResize:4 DoArgumentsMoveBack:0 DoArgumentsErase:0
#B  = RunAfter IfFunction:giq_option IfArgumentIs:4,BAD_REACTION IfFileDefined:NAME DoNameSet:BOption DoArgumentsResize:4 DoArgumentsMoveBack:0 DoArgumentsErase:0
# XOption() -> XLOption() not included
#Detect = RunAfter IfFunction:giq_Option IfNotEdited DoLogCurrentLine:DEBUG
#Detect = RunAfter IfFunction:giQ_option IfNotEdited DoLogCurrentLine:DEBUG
#Detect = RunAfter IfFunction:giQ_Option IfNotEdited DoLogCurrentLine:DEBUG


[Script:Minimize:GetCritterStat:SPECIAL]
#
# dude_SPECIAL macros
#
DudeStrength = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_st DoVariable:dude_strength
DudePerception = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_pe DoVariable:dude_perception
DudeEndurance = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_en DoVariable:dude_endurance
DudeCharisma = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_ch DoVariable:dude_charisma
DudeIQ = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_iq DoVariable:dude_iq
DudeAgility = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_ag DoVariable:dude_agility
DudeLuck = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_lu DoVariable:dude_luck
DudeIsStupid = RunAfter IfVariable:dude_iq IfOperatorName:LowerEquals IfOperatorValue:3 DoNameSet:dude_is_stupid DoOperatorClear
#
# self_SPECIAL macros
#
SelfStrength = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_st DoVariable:self_strength
SelfPerception = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_pe DoVariable:self_perception
SelfEndurance = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_en DoVariable:self_endurance
SelfCharisma = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_ch DoVariable:self_charisma
SelfIQ = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_iq DoVariable:self_iq
SelfAgility = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_ag DoVariable:self_agility
SelfLuck = RunAfter IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_lu DoVariable:self_luck

[Script:Minimize:GlobalVar]
#
# misc fo1.h macros
#
NecropolisWPumpFixed = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_NECROP_WATER_PUMP_FIXED IfOperatorName:Equals IfOperatorValue:2 DoVariable:necropolis_wpump_fixed DoOperatorClear
FollowersTrained = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_SLIDE_TRAIN_FOLLOWERS IfOperatorName:Equals IfOperatorValue:1 DoVariable:followers_trained DoOperatorClear
GetRaidersAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_TOTAL_RAIDERS DoVariable:get_raiders_alive
IsTandiAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_TANDI_HIRELING_STATUS IfOperatorName:Lower IfOperatorValue:3 DoVariable:is_tandi_alive DoOperatorsClear
IsAradeshAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_ARADESH_STATUS IfOperatorName:Equals IfOperatorValue:0 DoVariable:is_aradesh_alive DoOperatorClear
IsKillianAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_KILLIAN_DEAD IfOperatorName:Equals IfOperatorValue:0 DoVariable:is_killian_alive DoOperatorClear
IsGizmoAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_GIZMO_DEAD IfOperatorName:Equals IfOperatorValue:0 DoVariable:is_gizmo_alive DoOperatorClear
IsRhombusAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_RHOMBUS_STATUS IfOperatorName:Equals IfOperatorValue:0 DoVariable:is_rhombus_alive DoOperatorClear
IsGarlAlive = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_GARL_DEAD IfOperatorName:Equals IfOperatorValue:0 DoVariable:is_garl_alive DoOperatorClear
#
# misc gl_worldmap.h macros
#
IsTerrainDesert = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_WORLDMAP_TERRAIN IfOperatorName:Equals IfOperatorValue:WORLDMAP_TERRAIN_DESERT DoVariable:is_terrain_desert
IsTerrainCity = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_WORLDMAP_TERRAIN IfOperatorName:Equals IfOperatorValue:WORLDMAP_TERRAIN_CITY DoVariable:is_terrain_desert
IsTerrainMountain = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_WORLDMAP_TERRAIN IfOperatorName:Equals IfOperatorValue:WORLDMAP_TERRAIN_MOUNTAIN DoVariable:is_terrain_mountain
IsTerrainOcean = RunAfter IfFunction:global_var IfArgumentIs:0,GVAR_WORLDMAP_TERRAIN IfOperatorName:Equals IfOperatorValue:WORLDMAP_TERRAIN_OCEAN DoVariable:is_terrain_ocean

[Script:Minimize:HasTrait]
#
# general
#
DudePerk = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_PERK IfArgumentValue:1,dude_obj DoNameSet:dude_perk DoArgumentsMoveFront:2 DoArgumentsResize:1
DudeTrait = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_TRAIT IfArgumentValue:1,dude_obj DoNameSet:dude_trait DoArgumentsMoveFront:2 DoArgumentsResize:1
SelfAI = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_OBJECT IfArgumentValue:1,self_obj IfArgumentIs:2,OBJECT_AI_PACKET DoVariable:self_ai
SelfTeam = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_OBJECT IfArgumentValue:1,self_obj IfArgumentIs:2,OBJECT_TEAM_NUM DoVariable:self_team
SelfPerk = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_PERK IfArgumentValue:1,self_obj DoNameSet:self_perk DoArgumentsMoveFront:2 DoArgumentsResize:1
SelfTrait = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_TRAIT IfArgumentValue:1,self_obj DoNameSet:self_trait DoArgumentsMoveFront:2 DoArgumentsResize:1
DudeCurRot = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_OBJECT IfArgumentValue:1,dude_obj IfArgumentIs:2,OBJECT_CUR_ROT DoVariable:dude_cur_rot
SelfCurRot = RunAfter IfFunction:has_trait IfArgumentIs:0,TRAIT_OBJECT IfArgumentValue:1,self_obj IfArgumentIs:2,OBJECT_CUR_ROT DoVariable:self_cur_rot
#
# dude_PERK macros
#
DudeMentalBlock = RunAfter IfFunction:dude_perk IfArgumentIs:0,PERK_mental_block DoVariable:dude_mental_block
DudePresence = RunAfter IfFunction:dude_perk IfArgumentIs:0,PERK_presence DoVariable:dude_presence
DudeAwareness = RunAfter IfFunction:dude_perk IfArgumentIs:0,PERK_bonus_awareness DoVariable:dude_awareness
DudeFortuneFinder = RunAfter IfFunction:dude_perk IfArgumentIs:0,PERK_fortune_finder DoVariable:dude_fortune_finder
DudeSmoothTalker = RunAfter IfFunction:dude_perk IfArgumentIs:0,PERK_smooth_talker DoVariable:dude_smooth_talker
#
# self_PERK macros
#
SelfMentalBlock = RunAfter IfFunction:self_perk IfArgumentIs:0,PERK_mental_block DoVariable:self_mental_block
SelfPresence = RunAfter IfFunction:self_perk IfArgumentIs:0,PERK_presence DoVariable:self_presence
SelfAwareness = RunAfter IfFunction:self_perk IfArgumentIs:0,PERK_bonus_awareness DoVariable:self_awareness
SelfFortuneFinder = RunAfter IfFunction:self_perk IfArgumentIs:0,PERK_fortune_finder DoVariable:self_fortune_finder

[Script:Minimize:ItemCapsTotal]
DudeCaps = RunAfter IfFunction:item_caps_total IfArgumentValue:0,dude_obj DoVariable:dude_caps
SelfCaps = RunAfter IfFunction:item_caps_total IfArgumentValue:0,self_obj DoVariable:self_caps

[Script:Minimize:ObjArtFid]
DudeFid = RunAfter IfFunction:obj_art_fid IfArgumentValue:0,dude_obj DoVariable:dude_fid
SelfFid = RunAfter IfFunction:obj_art_fid IfArgumentValue:0,self_obj DoVariable:self_fid

[Script:Minimize:ObjCarrying]
DudeItem = RunAfter IfFunction:obj_carrying_pid_obj IfArgumentValue:0,dude_obj DoNameSet:dude_item DoArgumentsErase:0
DudeItemCount = RunAfter IfFunction:obj_is_carrying_obj_pid IfArgumentValue:0,dude_obj DoNameSet:dude_item_count DoArgumentsErase:0
SelfItem = RunAfter IfFunction:obj_carrying_pid_obj IfArgumentValue:0,self_obj DoNameSet:self_item DoArgumentsErase:0
SelfItemCount = RunAfter IfFunction:obj_is_carrying_obj_pid IfArgumentValue:0,self_obj DoNameSet:self_item_count DoArgumentsErase:0

[Script:Minimize:UsingSkill]
DudeIsSneaking = RunAfter IfFunction:using_skill IfArgumentValue:0,dude_obj IfArgumentIs:1,SKILL_SNEAK DoVariable:dude_is_sneaking
SelfIsSneaking = RunAfter IfFunction:using_skill IfArgumentValue:0,self_obj IfArgumentIs:1,SKILL_SNEAK DoVariable:self_is_sneaking

[Script:Counters]
#GVAR = RunAfter:999 IfFunction:global_var,set_global_var DoArgumentCount:0,GVAR
#AllFunctions = RunAfter:999 IfFunction DoNameCount:AllFunctions

[Script:Detect]
#
# gender
#
DudeGender = RunAfter:9999 IfFunction:get_critter_stat IfArgumentValue:0,dude_obj IfArgumentIs:1,STAT_gender IfOperator DoLogCurrentLine
SelfGender = RunAfter:9999 IfFunction:get_critter_stat IfArgumentValue:0,self_obj IfArgumentIs:1,STAT_gender IfOperator DoLogCurrentLine
ObjGender = RunAfter:9999 IfFunction:get_critter_stat IfArgumentIs:1,STAT_gender IfOperator DoLogCurrentLine
#
# misc
#
AttackComplex = RunAfter:9999 IfFunction:attack_complex DoLogCurrentLine
Metarule = RunAfter:9999 IfFunction:metarule,metarule2,metarule2_explosions,metarule3 DoLogCurrentLine
SfallFunc = RunAfter:9999 IfFunction:sfall_func0,sfall_func1,sfall_func2,sfall_func3,sfall_func4,sfall_func5,sfall_func6 DoLogCurrentLine
WorldmapTerrain = RunAfter:9999 IfFunction:global_var IfArgumentIs:0,GVAR_WORLDMAP_TERRAIN IfOperator DoLogCurrentLine
